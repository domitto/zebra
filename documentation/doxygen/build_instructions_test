# This file was automatically generated on Mon 23 Jun 2014 10:41:34 BST from
# source: /dls_sw/prod/R3.14.12.3/support/zebra/1-10/etc/makeIocs/test.xml
# 
# *** Please do not edit this file: edit the source file instead. ***
# 
/**
\page build_instructions_test Build Instructions for test
Build Instructions for test
<ol>
<li> Add the dependencies to configure/RELEASE.
\verbatim
ASYN=/dls_sw/prod/R3.14.12.3/support/asyn/4-21
BUSY=/dls_sw/prod/R3.14.12.3/support/busy/1-4dls1
ZEBRA=/dls_sw/prod/R3.14.12.3/support/zebra/1-10
MOTOR=/dls_sw/prod/R3.14.12.3/support/motor/6-7-1dls13
\endverbatim

<li> Add the DBD dependencies to src/Makefile
\verbatim
test_DBD += base.dbd
test_DBD += asyn.dbd
test_DBD += drvAsynSerialPort.dbd
test_DBD += motorSupport.dbd
test_DBD += devSoftMotor.dbd
test_DBD += busySupport.dbd
test_DBD += zebraSupport.dbd
\endverbatim

<li> Add the LIBS dependencies to src/Makefile
\verbatim
test_LIBS += zebra
test_LIBS += busy
test_LIBS += softMotor
test_LIBS += motor
test_LIBS += asyn
\endverbatim

<li> Use the template files to add records to the database.
\verbatim

# Macros:
#  P      Device prefix
#  Q      Device suffix
#  PORT   Asyn port and object name
#  NELM   Maximum number of elements in position compare array
#  EMPTY  Empty macro to satisfy VDCT
#  PREC   Precision to show position compare gate and pulse fields
#  M1     Motor 1 PV
#  M1DIR  Set to - if motor inverted in geobrick (decode control = 3 instead of 7)
#  M2     Motor 2 PV
#  M2DIR  Set to - if motor inverted in geobrick (decode control = 3 instead of 7)
#  M3     Motor 3 PV
#  M3DIR  Set to - if motor inverted in geobrick (decode control = 3 instead of 7)
#  M4     Motor 4 PV
#  M4DIR  Set to - if motor inverted in geobrick (decode control = 3 instead of 7)
file $(ZEBRA)/db/zebra.template
{
pattern { P, Q, PORT, NELM, EMPTY, PREC, M1, M1DIR, M2, M2DIR, M3, M3DIR, M4, M4DIR }
    { "$(ZEBRAPREFIX)", "", "ZEBRA", "100000", "", "4", "$(P)$(Q):NOMOTOR", "+", "$(P)$(Q):NOMOTOR", "+", "$(P)$(Q):NOMOTOR", "+", "$(P)$(Q):NOMOTOR", "+" }
}
\endverbatim

<li> Add the startup commands to st.cmd
\verbatim

# Loading libraries
# -----------------

# Device initialisation
# ---------------------

cd "$(TOP)"

dbLoadDatabase "dbd/test.dbd"
test_registerRecordDeviceDriver(pdbbase)

drvAsynSerialPortConfigure("ty_zebra", "/dev/ttyUSB0", 100, 0, 0)
asynSetOption("ty_zebra", 0, "baud", "115200")
asynSetOption("ty_zebra", 0, "parity", "None")
asynSetOption("ty_zebra", 0, "stop", "1")
asynSetOption("ty_zebra", 0, "bits", "8")

#zebraConfig(Port, SerialPort, MaxPosCompPoints)
zebraConfig("ZEBRA", "ty_zebra", 100000)
\endverbatim
</ol>
**/
